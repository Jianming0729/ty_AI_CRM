“租车智能客服”可以直接落地的 全景方案，包含你要的全部交付物：

RAG 知识库目录大纲（可直接做成 docs/ 结构）

文档切分颗粒度标准（chunk 规则 + 元数据规范）

检索/重排策略（从 baseline 到可上线级别）

评价集：100 条中文测试问法（覆盖 FAQ + 销售 + 保险 + 订单 + 异常场景）

“本地 7B/8B 模型 + RAG + WeCom Bridge”最小闭环架构图（ASCII）

结合你前面条件（已有租车系统 API、WeCom 已接入、目标是客服+营销）的一套完整项目落地路线图（原子级验收）

你当前设备：MacBook Pro M4 Pro / 24GB RAM，完全能跑“本地 7B/8B + RAG + WeCom Bridge”的 MVP。

0. 目标与边界（先写清，后续才稳）

目标（MVP）：企业微信里像真人一样回答租车问题，并能做主动营销（保险/升级/加购）；涉及动态数据（库存/报价/订单）必须调用你现有租车系统 API；对不确定或争议场景能“保守 + 转人工”。

能力边界：

RAG 负责“政策/条款/流程/常见问答”的准确性与可引用

业务真相（价格、库存、订单、押金退回状态）一律走工具 API

事故/赔付争议/投诉等高风险问题默认转人工（可给流程指引但不做承诺）

1) RAG 知识库目录大纲（租车客服专用）

建议你用一个单独仓库或在租车系统里新增：knowledge_base/（或 docs/kb/）。目录如下（可直接照抄）：

1.1 核心政策与流程（Policy）

01_rental_process/

pickup_checklist.md（取车验车、证件、签字、拍照）

return_process.md（还车流程、验车、结算）

extensions.md（续租/提前还车）

late_return.md（超时/超公里/额外费用）

02_pricing_deposit/

pricing_rules.md（计费规则、日租/周租/月租、税费）

deposit_rules.md（押金规则、冻结/退回时间）

fuel_policy.md（油费/电费、满油取还/差额）

tolls_parking.md（高速费、停车费、代缴）

03_driver_requirements/

license_id_requirements.md（中国驾照/国际驾照/年龄限制）

additional_driver.md（加驾驶员规则与费用）

04_vehicle_rules/

mileage_policy.md（限里程/超里程）

cross_city_policy.md（异地还车）

vehicle_upgrade_change.md（换车、升级、车型保证与否）

05_incident_violation/

accident_process.md（事故流程：报警/取证/报备）

breakdown_rescue.md（故障救援）

violation_handling.md（违章处理与代办费）

damage_claims.md（轻微剐蹭处理流程、注意“非承诺”）

06_invoice_refund/

invoice_policy.md（发票类型、开票流程）

refund_policy.md（取消、退款规则）

1.2 保险与增值服务（Insurance & Upsell）

10_insurance/

insurance_overview.md（保险总览：买不买的核心差异）

insurance_plan_A.md（基础险）

insurance_plan_B.md（升级险/全险）

insurance_exclusions.md（免责与不保范围）

claim_steps.md（理赔流程）

11_addons/

child_seat.md、gps.md、wifi.md

roadside_assistance.md

zero_deductible.md（不计免赔/免赔额说明）

premium_pickup.md（送车上门/取车服务）

1.3 门店与服务（Operations）

20_stores/

store_locations.md（门店、营业时间、停车位置）

contact_channels.md（电话、WeCom、紧急联系）

1.4 话术与模板（Playbook）

30_playbooks/

lead_capture.md（何时要电话/微信号/身份证等）

insurance_pitch.md（保险推荐剧本：3段式）

price_objection.md（价格异议应对）

competitor_compare.md（竞品比较边界）

handoff_human.md（转人工触发与解释话术）

1.5 结构化 FAQ（强烈建议）

40_faq/faq.yaml（问法—答案要点—引用链接—标签）

这份 YAML 会成为 RAG 的“高优先级知识”。

2) 文档切分颗粒度标准（chunk 规则 + 元数据）

客服 RAG 的核心是“条款级 chunk”，而不是一大段文章。

2.1 切分目标：每个 chunk 只回答一个“可验证问题”

理想 chunk 长度：150–350 中文字（含少量列表）

上限：600 字（超过就拆）

每个 chunk 至少包含：

规则/结论（一句话）

适用条件（何时生效）

例外/备注（如果有）

下一步动作（比如“需要携带/需要联系门店”）

2.2 标题与锚点（非常重要）

每个 chunk 必须有稳定 ID，便于引用和评测。

推荐格式：

KB_ID: P02-DEPOSIT-003

TITLE: 押金冻结与退回时间

TAGS: 押金,支付,退款

APPLIES_TO: 全国/城市/门店（如果不同要写清）

LAST_UPDATED: 2026-02-01

2.3 元数据建议（用于过滤与重排）

你在入库时给每个 chunk 绑定这些字段：

topic: pricing/deposit/insurance/accident/violation/store/…

risk_level: low/medium/high（事故/赔付争议 = high）

city: 若门店政策不同

channel: wecom/web/phone（话术差异）

3) 检索 + 重排策略（从能跑到可上线）

下面是你按阶段做的策略，越往后越“像真人且更准”。

3.1 Baseline（一天内能跑）

Query 改写：把用户口语提炼成“检索查询”（保留城市/车型/时间/押金/保险关键词）

向量检索 TopK=12（多取一点）

简单规则过滤：如果问题是“价格/库存/订单状态”，直接走工具 API，不走 RAG

LLM 生成回答：必须引用 1–3 个 chunk（内部可见）

3.2 可上线级（建议你做到这一步）

在 Baseline 上加 3 个关键件：

A) 混合检索（Hybrid）

向量检索 + BM25 关键词检索（中文很有用）

合并去重后 TopK=20，再重排到 TopN=5

B) 交叉编码器重排（可选但很提升）

用一个轻量 reranker（本地小模型或 API）对 TopK 做相关性重排

重点提升：保险条款、押金规则这种“词近但含义差很多”的问题

C) “条款优先”策略（Policy-first）

当用户问“能不能/是否必须/赔不赔/退不退”这类问题：

优先返回 risk_level 较高/更权威 chunk

回答更保守，避免过度承诺

3.3 客服对话专用的“意图路由”（必须做）

你要一个轻量意图分类器（可以用规则+LLM）把请求分为：

KB 类：流程/政策/保险条款/FAQ → RAG

Tool 类：库存/报价/订单/押金状态/门店实时 → API

Mixed 类：先解释规则再给报价 → RAG + Tool

Handoff 类：事故、纠纷、投诉、法律责任 → 转人工（给流程不承诺）

4) 评价集：100 条中文测试问法（可直接拿去做回归测试）

下面给你 100 条，按类别分组。你后续可以用它们做自动化评测：正确性、引用匹配、是否触发工具、是否转人工、是否有营销推荐。

A. 取还车与流程（1–15）

我第一次租车，取车要带什么证件？

取车需要信用卡吗？能用微信/支付宝吗？

取车要验车吗？要拍照吗？

还车可以晚半小时吗？怎么算钱？

我想提前还车，会退钱吗？

可以续租吗？怎么操作？

取车时间能改吗？会影响价格吗？

还车一定要去原来的门店吗？

夜里能还车吗？有没有自助还车？

取车时发现车有划痕怎么办？

还车时油不满会怎么收费？

车里能抽烟吗？抽烟会罚款吗？

我想带宠物上车可以吗？

我能让朋友来取车吗？

订单确认后能换车型吗？

B. 押金与支付（16–30）

押金一般收多少？

押金是冻结还是直接扣款？

押金多久退回？

押金退回慢了怎么办？

没有违章也会扣押金吗？

我用储蓄卡可以交押金吗？

能分开支付租金和押金吗？

取消订单押金会扣吗？

取车当天临时取消怎么办？

我信用卡额度不够怎么办？

押金能用现金吗？

还车后为什么还显示冻结？

押金退回到哪张卡？能换卡提现吗？

订单结束后还会追加扣款吗？

你们支持开票吗？押金能开票吗？

C. 价格、里程、异地（31–45）

日租多少钱？包含什么费用？

周租/月租有没有优惠？

价格里含保险吗？

限里程吗？超了怎么收费？

我想从北京开到天津，允许吗？

异地还车怎么收费？

过路费是谁出？

停车费能报销吗？

如果遇到限行怎么办？

车型能保证吗？还是只保证同级？

我想升级车型要加多少钱？

儿童座椅怎么收费？

送车上门多少钱？

我们公司长期租有折扣吗？

节假日价格会上涨吗？

D. 驾照、年龄、加驾驶员（46–60）

中国驾照可以租吗？

外国护照可以租吗？

国际驾照可以吗？需要翻译件吗？

未满 21 岁能租吗？

需要驾龄吗？

可以加一个驾驶员吗？怎么收费？

加驾驶员需要到店吗？

朋友中途开车没加驾驶员会怎样？

可以用电子驾照吗？

我驾照刚拿到一个月可以租吗？

取车时证件名字和订单名字不一致怎么办？

公司名义租车需要什么材料？

夫妻/家人能替我开吗？

我是港澳台证件可以租吗？

我身份证没带，能用护照吗？

E. 保险（61–80）——营销重点

你们有什么保险？分别保什么？

我不买保险也能租吗？

买了保险就全赔吗？有没有免赔额？

玻璃/轮胎/底盘算不算？

轻微剐蹭怎么处理？我需要赔多少？

发生事故第一步要做什么？

事故需要报警吗？不报警能理赔吗？

我撞了别人的车，第三者怎么赔？

车被偷了怎么办？保险赔吗？

下雨打滑撞护栏算谁责任？

轮胎爆了算事故吗？

我自己不小心刮了墙，保险能报吗？

车停路边被刮了，怎么办？

酒驾/闯红灯导致事故保险赔吗？

保险是按天买吗？

我租 3 天，保险多少钱？

你推荐哪个保险更划算？

我只在市区开，有必要买保险吗？

保险能中途加买吗？

保险费用能开票吗？

F. 违章、故障、救援（81–90）

违章怎么处理？你们代办吗？

违章多久会通知我？

违章罚款会从押金扣吗？

我不认同违章记录怎么办？

车在路上抛锚了怎么办？

爆胎/没电了能救援吗？收费吗？

发生事故车不能开了，我怎么继续行程？

车辆故障导致我延误，你们赔偿吗？

我把钥匙锁车里了怎么办？

车内物品丢了你们负责吗？

G. 订单、发票、客服转人工（91–100）

我想查一下我的订单状态。

我想改一下取车门店。

我想取消订单。

我想申请退款。

订单结束后怎么开电子发票？

押金退回太慢了，你帮我催一下。

我对收费有异议，能不能找负责人？

我出了事故现在很急，能立刻联系人工吗？

你们有24小时客服吗？

我不想打字，能语音沟通吗？

你可以用这 100 条做自动化评测：

是否正确路由（RAG vs Tool vs Handoff）

是否引用到正确条款 chunk

是否出现“过度承诺”

保险/加购是否能自然推荐

5) 最小闭环架构图（本地 7B/8B + RAG + WeCom Bridge）
┌──────────────────────────┐
│   企业微信(WeCom) 用户      │
└─────────────┬────────────┘
              │ 1)消息回调/用户发言
              v
┌──────────────────────────┐
│  WeCom Bridge (你的服务)   │
│  - 验签/解密                │
│  - 会话ID映射               │
│  - 发送/撤回/客服消息        │
└─────────────┬────────────┘
              │ 2)把文本请求交给对话编排层
              v
┌──────────────────────────┐
│  Orchestrator (可用OpenClaw│
│  或你自己的Agent服务)       │
│  - 意图路由 KB/Tool/Handoff  │
│  - 调用RAG检索               │
│  - 调用租车系统Tools(API)    │
│  - 话术Playbook(保险/转化)   │
└───────┬───────────┬───────┘
        │           │
        │3)RAG检索    │4)业务查询/动作
        v           v
┌──────────────┐   ┌───────────────────┐
│ Vector DB     │   │ 租车系统 API       │
│ (pgvector/    │   │ - 库存/报价/订单   │
│  Qdrant)      │   │ - 押金/发票/门店   │
└───────┬──────┘   └─────────┬─────────┘
        │5)相关chunk           │6)结构化结果
        v                     v
┌──────────────────────────┐
│ Local LLM (7B/8B)         │
│ - 生成回答                 │
│ - 引用chunk/工具结果        │
│ - 输出结构化回复 + 下一步    │
└─────────────┬────────────┘
              │7)回复文本/卡片
              v
┌──────────────────────────┐
│ WeCom Bridge -> 企业微信回复 │
└──────────────────────────┘


注：OpenClaw 可选

如果你用 OpenClaw：它更像“多渠道 + skills runtime + agent 管理”

如果你只做 WeCom：也可以直接写一个轻量 Orchestrator 服务（更可控）
你之前说“客观条件都具备”，所以两种都能做；选哪种取决于你是否要未来接更多渠道/agent 自动化。

6) 完整项目落地全景方案（原子级里程碑 + 验收）

下面是一条你能稳步推进、每一步都闭环的路线（强烈建议照顺序做）。

M0：工程骨架（1 天）

建仓：wecom_bridge/, orchestrator/, kb/, eval/

日志：每次会话保存（用户问什么、命中哪些chunk、调用了哪些API、最终回复）

验收：能复盘任意一条会话全链路。

M1：RAG Baseline（1–2 天）

建 30–50 条 KB chunk（押金/保险/取还车/超时/违章）

向量库 + 基础检索 + 引用

通过上面 100 条中的前 30 条测试

验收：

FAQ 正确率 ≥ 80%

找不到依据时能“保守拒答/转人工”

不出现乱承诺

M2：工具层（你已有 API，主要是封装）（1–2 天）

封装 5 个最小工具：

inventory_search

quote_get

order_status

store_info

lead_create / handoff_human

验收：

20 条“动态问题”全部走工具

输出字段正确、可追溯

M3：销售剧本（保险/加购）（1–2 天）

保险推荐 Playbook：

先问使用场景（城市/新手/高速/行程紧）

再给 2 档推荐（基础 vs 全面）

给“风险解释 + 价格/天 + 你能省什么麻烦”

价格异议 Playbook：推荐同级替代 / 改时段 / 套餐

验收：

在测试集（61–80）里，至少 70% 能自然引导加购

话术不冒犯、不强推

M4：企业微信体验优化（1–3 天）

支持：快捷按钮/菜单（比如“查报价”“了解保险”“押金问题”）

支持：卡片消息（车型/价格/保险对比）

支持：转人工（给运营一个入口）

验收：

客户体验像“真人客服+销售”而不是机器人

M5：语音（后置，按两条路选）

WeCom 语音消息：ASR→LLM→TTS（先非实时）

或电话通话：后续再接

验收：语音来回 2 轮可用，且能落库。

M6：上线治理（必须）

审计：每条回复的依据 chunk + API 日志

灰度：先只在一个城市/一个门店/一部分客户启用

质量监控：误导率、转人工率、线索率、保险加购率

7) 你用本地 7B/8B 模型的“最建议配置”（成本可控）

推荐思路：本地模型负责 80% 对话，复杂问题可升级到云端（可选）。
在你这台 MacBook 上，现实可用的路线是：

7B/8B 量化模型（本地推理） + 向量库（本地） + 你的租车 API（本地/内网）

先不微调：把精力放在 KB chunk、检索、工具路由、话术剧本

微调什么时候做？

当你已经有 大量真实对话数据，并且确定“同一类问题总是要同一风格/同一模板输出”时再做（否则收益不高）。

最后：你下一步只需要做两件事（我就能把它“变成可执行工程”）

你现有租车系统 API 列一下：库存/报价/订单/押金/保险/门店分别有哪些 endpoint（哪怕是伪接口名也行）。

保险产品你目前卖几档？每档的 价格/天、主要保障点、不保范围各列 5–10 条。

给我这两份信息后，我可以把上面的方案进一步“工程化”成：

KB chunk 模板（可直接写入）

RAG 检索 pipeline 伪代码与配置

WeCom Bridge ↔ Orchestrator 的消息协议（JSON schema）

保险/加购 playbook 的可执行规则（状态机/决策树）

你如果不想补充信息，我也可以先按“通用租车规则”的占位符版本把 schema 与模板全部给你，后续再替换成你真实条款即可。

ChatGPT can make mistakes. Check important info.